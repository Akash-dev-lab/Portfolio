@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --radius: 0.75rem;
        
        /* Dark tech theme - Base colors */
        --background: 0.12 0 0;
        --foreground: 0.98 0 0;
        
        /* Card colors with subtle transparency */
        --card: 0.15 0 0;
        --card-foreground: 0.98 0 0;
        
        --popover: 0.15 0 0;
        --popover-foreground: 0.98 0 0;
        
        /* Neon cyan/blue primary accent */
        --primary: 0.70 0.20 220;
        --primary-foreground: 0.98 0 0;
        
        /* Secondary dark gray */
        --secondary: 0.20 0 0;
        --secondary-foreground: 0.98 0 0;
        
        /* Muted elements */
        --muted: 0.22 0 0;
        --muted-foreground: 0.65 0 0;
        
        /* Neon purple/magenta accent */
        --accent: 0.65 0.25 310;
        --accent-foreground: 0.98 0 0;
        
        /* Destructive red */
        --destructive: 0.60 0.25 25;
        --destructive-foreground: 0.98 0 0;
        
        /* Borders and inputs with transparency */
        --border: 1 0 0 / 12%;
        --input: 1 0 0 / 15%;
        --ring: 0.70 0.20 220;
        
        /* Chart colors - vibrant tech palette */
        --chart-1: 0.70 0.20 220;
        --chart-2: 0.65 0.25 310;
        --chart-3: 0.75 0.22 180;
        --chart-4: 0.68 0.23 280;
        --chart-5: 0.72 0.21 200;
        
        /* Sidebar */
        --sidebar: 0.15 0 0;
        --sidebar-foreground: 0.98 0 0;
        --sidebar-primary: 0.70 0.20 220;
        --sidebar-primary-foreground: 0.98 0 0;
        --sidebar-accent: 0.22 0 0;
        --sidebar-accent-foreground: 0.98 0 0;
        --sidebar-border: 1 0 0 / 12%;
        --sidebar-ring: 0.70 0.20 220;
        
        /* Scroll storytelling variables */
        --scroll-section: 0;
        --scroll-velocity: 0;
        --idle-intensity: 0;
    }

    .light {
        /* Light theme - Base colors */
        --background: 0.98 0 0;
        --foreground: 0.15 0 0;
        
        /* Card colors */
        --card: 0.95 0 0;
        --card-foreground: 0.15 0 0;
        
        --popover: 0.98 0 0;
        --popover-foreground: 0.15 0 0;
        
        /* Vibrant blue primary for light mode */
        --primary: 0.55 0.22 240;
        --primary-foreground: 0.98 0 0;
        
        /* Light gray secondary */
        --secondary: 0.92 0 0;
        --secondary-foreground: 0.15 0 0;
        
        /* Muted elements */
        --muted: 0.90 0 0;
        --muted-foreground: 0.45 0 0;
        
        /* Purple accent for light mode */
        --accent: 0.60 0.20 280;
        --accent-foreground: 0.98 0 0;
        
        /* Destructive red */
        --destructive: 0.55 0.25 25;
        --destructive-foreground: 0.98 0 0;
        
        /* Borders and inputs */
        --border: 0 0 0 / 15%;
        --input: 0 0 0 / 12%;
        --ring: 0.55 0.22 240;
        
        /* Chart colors - vibrant palette for light mode */
        --chart-1: 0.55 0.22 240;
        --chart-2: 0.60 0.20 280;
        --chart-3: 0.60 0.22 180;
        --chart-4: 0.58 0.21 260;
        --chart-5: 0.62 0.20 200;
        
        /* Sidebar */
        --sidebar: 0.95 0 0;
        --sidebar-foreground: 0.15 0 0;
        --sidebar-primary: 0.55 0.22 240;
        --sidebar-primary-foreground: 0.98 0 0;
        --sidebar-accent: 0.92 0 0;
        --sidebar-accent-foreground: 0.15 0 0;
        --sidebar-border: 0 0 0 / 15%;
        --sidebar-ring: 0.55 0.22 240;
    }

    * {
        @apply border-border;
    }
    
    html {
        /* Critical: Enable vertical scrolling with auto height */
        overflow-y: auto;
        overflow-x: hidden;
        height: auto;
        min-height: 100%;
        /* Smooth scrolling for anchor links (native fallback) */
        scroll-behavior: smooth;
    }
    
    body {
        @apply bg-background text-foreground;
        font-feature-settings: "rlig" 1, "calt" 1;
        cursor: none;
        /* Critical: Enable vertical scrolling with auto height */
        overflow-y: auto;
        overflow-x: hidden;
        height: auto;
        min-height: 100%;
        position: relative;
    }
    
    #root {
        /* Critical: Ensure root can expand */
        height: auto;
        min-height: 100vh;
        overflow: visible;
    }
    
    /* Lenis smooth scroll classes - non-locking mode */
    html.lenis,
    html.lenis body {
        height: auto;
        overflow-y: auto;
    }
    
    .lenis.lenis-smooth {
        scroll-behavior: auto !important;
    }
    
    .lenis.lenis-smooth [data-lenis-prevent] {
        overscroll-behavior: contain;
    }
    
    .lenis.lenis-stopped {
        overflow: auto !important; /* Changed from hidden to auto */
    }
    
    /* Critical: Never block pointer events during scroll */
    .lenis.lenis-scrolling {
        pointer-events: auto !important;
    }
    
    /* Native scroll fallback */
    html.native-scroll,
    html.native-scroll body {
        height: auto !important;
        overflow-y: auto !important;
        scroll-behavior: smooth !important;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
        width: 10px;
    }
    
    ::-webkit-scrollbar-track {
        background: oklch(var(--background));
    }
    
    ::-webkit-scrollbar-thumb {
        background: oklch(var(--primary) / 0.3);
        border-radius: 5px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: oklch(var(--primary) / 0.5);
    }
}

@layer utilities {
    /* Custom cursor styles */
    .custom-cursor {
        position: fixed;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: oklch(var(--primary));
        pointer-events: none;
        z-index: 9999;
        mix-blend-mode: difference;
        transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        transform-origin: center;
    }
    
    .custom-cursor.magnetic {
        background: oklch(var(--accent));
    }
    
    .custom-cursor.clickable {
        background: oklch(var(--primary));
        box-shadow: 0 0 20px oklch(var(--primary) / 0.6);
    }
    
    .custom-cursor-glow {
        position: fixed;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background: radial-gradient(circle, oklch(var(--primary) / 0.15) 0%, transparent 70%);
        pointer-events: none;
        z-index: 9998;
        transition: opacity 0.3s ease, transform 0.3s ease;
        transform: translate(-50%, -50%);
    }
    
    /* Idle state animations */
    .idle-state .idle-pulse {
        animation: idle-pulse 4s ease-in-out infinite;
    }
    
    @keyframes idle-pulse {
        0%, 100% {
            opacity: 0.3;
            transform: scale(1);
        }
        50% {
            opacity: 0.6;
            transform: scale(1.1);
        }
    }
    
    /* Scroll velocity reactive effects */
    body {
        --scroll-glow-intensity: calc(var(--scroll-velocity) * 0.5);
    }
    
    /* Gradient animation */
    @keyframes gradient {
        0%, 100% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
    }
    
    .animate-gradient {
        background-size: 200% 200%;
        animation: gradient 3s ease infinite;
    }
    
    /* Float animations */
    @keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-20px);
        }
    }
    
    @keyframes float-delayed {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-30px);
        }
    }
    
    @keyframes float-slow {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-15px);
        }
    }
    
    .animate-float {
        animation: float 6s ease-in-out infinite;
    }
    
    .animate-float-delayed {
        animation: float-delayed 8s ease-in-out infinite;
        animation-delay: 1s;
    }
    
    .animate-float-slow {
        animation: float-slow 10s ease-in-out infinite;
        animation-delay: 2s;
    }
    
    /* Glow effects */
    .glow-primary {
        box-shadow: 0 0 20px oklch(var(--primary) / 0.4), 0 0 40px oklch(var(--primary) / 0.2);
    }
    
    .glow-accent {
        box-shadow: 0 0 20px oklch(var(--accent) / 0.4), 0 0 40px oklch(var(--accent) / 0.2);
    }
    
    /* Glassmorphism */
    .glass {
        background: oklch(var(--card) / 0.5);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
    }
    
    /* Magnetic button effect */
    .magnetic-button {
        transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .magnetic-button:hover {
        transform: scale(1.05);
    }
    
    .magnetic-button:active {
        transform: scale(0.95);
    }
    
    /* Cursor reactive elements */
    .magnetic-element {
        transition: transform 0.2s ease-out;
    }
    
    /* 3D perspective effects */
    .perspective-card {
        transform-style: preserve-3d;
        transition: transform 0.3s ease-out;
    }
    
    .perspective-card:hover {
        transform: perspective(1000px) rotateX(5deg) rotateY(5deg);
    }
    
    /* Bloom effect */
    @keyframes bloom {
        0%, 100% {
            filter: brightness(1) blur(0px);
        }
        50% {
            filter: brightness(1.3) blur(2px);
        }
    }
    
    .animate-bloom {
        animation: bloom 2s ease-in-out infinite;
    }
    
    /* Neon border animation */
    @keyframes neon-border {
        0%, 100% {
            border-color: oklch(var(--primary) / 0.3);
            box-shadow: 0 0 10px oklch(var(--primary) / 0.2);
        }
        50% {
            border-color: oklch(var(--accent) / 0.5);
            box-shadow: 0 0 20px oklch(var(--accent) / 0.4);
        }
    }
    
    .animate-neon-border {
        animation: neon-border 2s ease-in-out infinite;
    }
    
    /* Reduced motion support - fallback to native scrolling */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
        
        html {
            scroll-behavior: auto !important;
        }
        
        .custom-cursor,
        .custom-cursor-glow {
            display: none;
        }
        
        body {
            cursor: auto;
        }
    }
}
